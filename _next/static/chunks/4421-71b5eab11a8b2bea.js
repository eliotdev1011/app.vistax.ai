"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4421],{67160:function(e,t,a){a.d(t,{u:function(){return Modal}});var n=a(85893),r=a(67294),o=a(9404);let Modal=e=>{let{onClose:t,callback:a,children:i,button_text:s="Close"}=e,[l,u]=(0,r.useState)(!1);return(0,n.jsxs)("div",{className:"min-w-screen h-screen animated fadeIn faster fixed left-0 top-0 flex justify-center items-center inset-0 z-50 outline-none focus:outline-none bg-no-repeat bg-center bg-cover text-white border border-custom",id:"modal-id",onClick:()=>!l&&t(),children:[(0,n.jsx)("div",{className:"absolute bg-black opacity-80 inset-0 z-0"}),(0,n.jsx)("div",{"data-testid":"modal-div",className:"w-full  max-w-lg p-5 relative mx-auto my-auto rounded-xl shadow-lg bg-level-one",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:(0,n.jsxs)("div",{children:[i,(0,n.jsx)("div",{className:"py-3  mt-2 text-center space-x-4 md:block",children:(0,n.jsx)(o.z,{className:"w-full",onClick:()=>{a&&a(),t()},children:s})})]})})]})}},10721:function(e,t,a){a.d(t,{TL:function(){return useAppDispatch},CG:function(){return k},C:function(){return r.C},cT:function(){return r.cT},OA:function(){return r.OA},bv:function(){return useNFTApproval},ZW:function(){return useStakingState},dQ:function(){return d.d},A$:function(){return useTokenApproval},mM:function(){return useTokenBalance},pQ:function(){return useTokenPrice}});var n=a(79756),r=a(59860),o=a(67294),i=a(68851),s=a(42812),l=a(96266),u=a(44304);let useStakingState=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=useAppDispatch(),{account:a}=(0,s.l)(),[n,r]=(0,o.useState)(!0),[d,m]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{n&&(m(!0),(0,l.ku)(u.STAKING_MODULES,e).then(e=>{t((0,i.jF)(e)),m(!1)}),r(!1)),!e&&a&&t((0,i.Uz)(a,!0))},[a,n,d]),d};a(51128),a(93515);var d=a(50010),m=a(2707),f=a(22920);let useTokenApproval=(e,t,a,n)=>{let[i,s]=(0,o.useState)(!1),[l,u]=(0,o.useState)(!1),d=(0,r.cT)(e,!0);(0,o.useEffect)(()=>{if(d){let e=d.allowance(t,a).then(e=>"0"===n?e.gt(0):e.gte(n)),{promise:r,cancel:o}=(0,m.g)(e);return r.then(e=>s(e)).catch(()=>!0),o}},[n,t,a]);let handleApprove=async()=>{u(!0);try{f.Am.info("Awaiting successful transaction");let e=await d.approve(a,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");await e.wait(),f.Am.success("Transaction successfully complete"),s(!0)}catch(e){f.Am.error(e.reason||e.message)}u(!1)};return{approved:i,loading:l,handleApprove}},useNFTApproval=(e,t,a)=>{let[n,i]=(0,o.useState)(!1),[s,l]=(0,o.useState)(!1),u=(0,r.OA)(e,!0);(0,o.useEffect)(()=>{if(u){let e=u.isApprovedForAll(t,a),{promise:n,cancel:r}=(0,m.g)(e);return n.then(e=>i(e)).catch(()=>!0),r}},[t,a]);let handleApprove=async()=>{l(!0);try{f.Am.info("Awaiting successful transaction");let e=await u.setApprovalForAll(a,!0);await e.wait(),f.Am.success("Transaction successfully complete"),i(!0)}catch(e){f.Am.error(e.reason||e.message)}l(!1)};return{approved:n,loading:s,handleApprove}};var g=a(30765),p=a(78915);let useTokenBalance=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[a,n]=(0,o.useState)("0"),{account:r}=(0,s.l)();return(0,o.useEffect)(()=>{let a=(0,g.lN)(e);if(a&&r){let fetchBal=async()=>{let e=await (t?p.A.getBalance(r):a.balanceOf(r));n(e.toString())};fetchBal();let e=setInterval(fetchBal,1e4);return()=>clearInterval(e)}},[r,e]),a};var v=a(2593),_=a(19981),y=a(41421);let{symbol:h,decimals:S=18,address:w}=u.DEFAULT_TOKEN,useTokenPrice=()=>{let[e,t]=(0,o.useState)(v.O$.from(0));return(0,o.useEffect)(()=>{let e=(0,_.jq)(h,w),{cancel:a,promise:n}=(0,m.g)(e);return n.then(e=>{t((0,y.eS)(e.toString(),S))}).catch(()=>!0),a},[]),e},useAppDispatch=()=>(0,n.I0)(),k=n.v9},59860:function(e,t,a){a.d(t,{C:function(){return useDecubateContractByAddress},OA:function(){return useERC721Contract},a1:function(){return useDecubateContract},cT:function(){return useERC20Contract}});var n=a(67294),r=a(64146),o=a(42812),i=a(30765),s=a(19485);let c=(e,t,a,n,o)=>e&&t&&a&&(0,s.UJ)(e)?new r.CH(e,t,n?a.getSigner(o).connectUnchecked():a):void 0,useContract=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{provider:r,account:i}=(0,o.l)();return(0,n.useMemo)(()=>c(e,t,r,a,i),[e,t,a,r,i])},useDecubateContract=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{address:a,abi:n}=i.LJ[e];return[useContract(a,n,t),a]},useDecubateContractByAddress=function(e,t){var a;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return[useContract(e,null===(a=i.LJ[t])||void 0===a?void 0:a.abi,n),e]},useERC20Contract=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i.LJ.ERC20.abi;return useContract(e,a,t)},useERC721Contract=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i.LJ.ERC721.abi;return useContract(e,a,t)}},51128:function(e,t,a){a.d(t,{e:function(){return useNFT}});var n=a(67294),r=a(2593),o=a(30765),i=a(2707);let getData=async e=>{let[t,a]=await Promise.all([e.totalSupply(),e.name()]);return{total_supply:t,name:a}},useNFT=e=>{let[t,a]=(0,n.useState)(""),[s,l]=(0,n.useState)(!1),[u,d]=(0,n.useState)(r.O$.from(0));return(0,n.useEffect)(()=>{let t=(0,o.al)(e);if(t){l(!0);let{promise:e,cancel:n}=(0,i.g)(getData(t));return e.then(e=>{let{total_supply:t,name:n}=e;d(t),a(n),l(!1)}).catch(()=>{a(""),d(r.O$.from(0)),l(!1)}),n}d(r.O$.from(0)),a("")},[e]),{name:t,total_supply:u,nft_loading:s}}},93515:function(e,t,a){a.d(t,{m:function(){return usePairReserves}});var n=a(67294),r=a(2593),o=a(30765),i=a(59850);let usePairReserves=e=>{let t=e&&(0,o.ti)(e,i.R.Pair),[a,s]=(0,n.useState)({reserve0:r.O$.from(0),reserve1:r.O$.from(0)}),[l,u]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{if(t){if(l)t.getReserves().then(e=>s(e)),u(!1);else{let e=setTimeout(()=>t.getReserves().then(e=>s(e)),5e3);return()=>clearTimeout(e)}}},[a,t,l]),a}},50010:function(e,t,a){a.d(t,{d:function(){return useToken}});var n=a(67294),r=a(30765),o=a(2707);let getData=async e=>{let[t,a]=await Promise.all([e.symbol(),e.decimals()]);return{symbol:t,decimals:a}},useToken=e=>{let[t,a]=(0,n.useState)(""),[i,s]=(0,n.useState)(18),[l,u]=(0,n.useState)(!1),[d,m]=(0,n.useState)(e),f=(0,n.useMemo)(()=>(0,r.lN)(e),[e]);return(0,n.useEffect)(()=>{if(!l&&f){let e=getData(f),{cancel:t,promise:n}=(0,o.g)(e);return n.then(e=>{let{symbol:t,decimals:n}=e;a(t),s(n),u(!0)}).catch(()=>{u(!0)}),t}d!==e&&(u(!1),a(""),s(18)),m(e)},[e,f]),{symbol:t,decimals:i}}},96266:function(e,t,a){a.d(t,{wL:function(){return getAddParams},RO:function(){return getPathname},ht:function(){return getSetParams},ku:function(){return getStakingPools}});var n=a(35553),r=a(27484),o=a.n(r),i=a(91328),s=a(61267),l=a(30765);a(41421);var u=a(59850),d=a(44304),m=a(84379),f=a(88326),g=a(2593);let mapPool=async(e,t)=>{switch(e.type){case i.W.NFT:return mapNFTPool(e,t);case i.W.Liquidity:return mapLiquidityPool(e,t);case i.W.Dynamic:return mapDynamicPool(e,t);default:return mapCompoundPool(e,t)}},mapDynamicPool=async(e,t)=>{var a,n;let{contract_idx:r,type:i,address:g}=e,p=e.input.toLowerCase(),v=e.reward.toLowerCase(),_=(0,l.dm)(u.R.ERC20),y=(0,l.dm)(s.XH[i]),h=(0,l.dm)(u.R.LogoStore),[S,[w],[k],[b],[C],[P],[R]]=await (0,m.n)([{target:g,func_name:"multipliers",iface:y,params:[r]},{target:p,func_name:"symbol",iface:_},{target:p,func_name:"decimals",iface:_},{target:v,func_name:"symbol",iface:_},{target:v,func_name:"decimals",iface:_},{target:d.VV,func_name:"logoSource",iface:h,params:[p]},{target:d.VV,func_name:"logoSource",iface:h,params:[v]}]),A=await (0,f.WR)(w,b,k,C,e.rewardRate,e.totalInvested);return{name:"".concat(w," - ").concat(b," dynamic"),id:t,contract_idx:r,type:i,address:g,reward_rate:"".concat(A," %"),lock_period:null===(a=e.lockPeriodInDays)||void 0===a?void 0:a.toString(),input_token:{address:p,decimals:k,symbol:w,logo:P},reward_token:{address:v,decimals:C,symbol:b,logo:R},total_staked:e.totalInvested.toString(),hardcap:e.hardCap.toString(),end_date:o()(1e3*e.endDate).subtract(Number(e.lockPeriodInDays),"days").toISOString(),nft_multiplier:null===(n=S.multi)||void 0===n?void 0:n.toString(),nft_multiplier_used:S.active,nft_name:S.name,is_withdraw_locked:!0}},mapCompoundPool=async(e,t)=>{var a,n,r,i;let{contract_idx:f,type:g,address:p,vault:v}=e,_=e.token.toLowerCase(),y=(0,l.dm)(u.R.ERC20),h=(0,l.dm)(s.XH[g]),S=(0,l.dm)(u.R.LogoStore),[[w],[k],b,[C]]=await (0,m.n)([{target:_,func_name:"symbol",iface:y},{target:_,func_name:"decimals",iface:y},{target:p,func_name:"nftInfo",iface:h,params:[f]},{target:d.VV,func_name:"logoSource",iface:S,params:[_]}]),P={address:_,decimals:k,symbol:w,logo:C};return{name:"".concat(P.symbol," Compounding"),id:t,contract_idx:f,type:g,reward_rate:Math.round(Number(e.apy)/10*100)/100+"%",lock_period:null===(a=e.lockPeriodInDays)||void 0===a?void 0:a.toString(),input_token:P,reward_token:P,total_staked:null===(n=e.totalDeposit)||void 0===n?void 0:n.toString(),hardcap:(null===(r=e.hardCap)||void 0===r?void 0:r.toString())||"1000000000000000000000000000",end_date:o()(e.endDate.mul(1e3).toNumber()).subtract(Number(e.lockPeriodInDays),"days").toISOString(),nft_multiplier:(null==b?void 0:null===(i=b.multiplier)||void 0===i?void 0:i.toString())||"10",nft_multiplier_used:(null==b?void 0:b.active)||!1,nft_name:b.name,address:p,vault:v,is_withdraw_locked:!0}},mapNFTPool=async(e,t)=>{var a,n,r;let{contract_idx:i,type:s,address:l}=e,u=e.common.input.toLowerCase(),d=e.common.reward.toLowerCase(),[[f],[g],[p],[v],[_],[y]]=await (0,m.n)(getNFTCalls(u,d)),[h,S]=[{address:u,symbol:y,name:_,logo:v},{address:d,decimals:g,symbol:f,logo:p}];return{name:e.name,id:t,contract_idx:i,type:s,reward_rate:e.common.rewardRate.toString(),lock_period:null===(a=e.common.lockPeriodInDays)||void 0===a?void 0:a.toString(),input_token:h,reward_token:S,total_staked:null===(n=e.common.totalInvested)||void 0===n?void 0:n.toString(),hardcap:(null===(r=e.common.hardCap)||void 0===r?void 0:r.toString())||"1000000000000000000000000000",end_date:o()(1e3*e.common.endDate).subtract(e.common.lockPeriodInDays,"days").toISOString(),nft_multiplier:10,nft_multiplier_used:!1,nft_name:"",address:l,max_per_user:e.maxPerUser,collection_start:e.startIdx,collection_end:e.endIdx,logo:e.logo,header_logo:e.headerLogo,staked_tokens:[],available_tokens:[],is_withdraw_locked:e.common.isWithdrawLocked,collection_url:e.collection}},mapLiquidityPool=async(e,t)=>{var a,r;let{contract_idx:i,type:f,address:p}=e,v=(0,l.dm)(u.R.ERC20),_=(0,l.dm)(s.XH[f]),y=(0,l.dm)(u.R.LogoStore),h=(0,l.dm)(u.R.Pair),S=e.input,w=e.reward,[k,b,[C],[P],R,[A]]=await (0,m.n)([{target:p,func_name:"isWrappedNative",iface:_,params:[S]},{target:p,func_name:"multis",iface:_,params:[i]},{target:S,func_name:"token0",iface:h},{target:S,func_name:"token1",iface:h},{target:S,func_name:"getReserves",iface:h},{target:S,func_name:"totalSupply",iface:h}]),[[N],[T],[D],[L],[E],[I],[x],[F],[O]]=await (0,m.n)([{target:C,func_name:"symbol",iface:v},{target:C,func_name:"decimals",iface:v},{target:d.VV,params:[C],func_name:"logoSource",iface:y},{target:P,func_name:"symbol",iface:v},{target:P,func_name:"decimals",iface:v},{target:d.VV,params:[P],func_name:"logoSource",iface:y},{target:w,func_name:"symbol",iface:v},{target:w,func_name:"decimals",iface:v},{target:d.VV,params:[w],func_name:"logoSource",iface:y}]),W=R.reserve0.mul(e.totalInvested).div(A.eq(0)?1:A),V=R.reserve1.mul(e.totalInvested).div(A.eq(0)?1:A),M=N===x?R.reserve0:R.reserve1,q=M.mul(g.O$.from(10).pow(18)).div(A.eq(0)?1:A).mul(2),z=parseFloat((0,n.bM)(q,F)),B=e.rewardRate/1e3,j=(B/z*100).toFixed(2);return{name:"".concat(N," / ").concat(L," -> ").concat(x),id:t,contract_idx:i,type:f,reward_rate:j+"%",lock_period:null===(a=e.lockPeriodInDays)||void 0===a?void 0:a.toString(),input_token:{address:C,decimals:T,symbol:N,logo:D},second_input_token:{address:P,decimals:E,symbol:L,logo:I},reward_token:{address:w,decimals:F,symbol:x,logo:O},total_staked:W.toString(),second_total_staked:V.toString(),hardcap:"0",end_date:o()(1e3*e.endDate).subtract(Number(e.lockPeriodInDays),"days").toISOString(),nft_multiplier:null===(r=b.multi)||void 0===r?void 0:r.toString(),nft_multiplier_used:b.active,nft_name:b.name,address:p,is_withdraw_locked:e.isWithdrawLocked,is_native:[2!==k.pos,k.pos],pair:S}},getNFTCalls=(e,t)=>{let a=(0,l.dm)(u.R.ERC20),n=(0,l.dm)(u.R.ERC721),r=(0,l.dm)(u.R.LogoStore);return[{target:t,func_name:"symbol",iface:a},{target:t,func_name:"decimals",iface:a},{target:d.VV,func_name:"logoSource",iface:r,params:[t]},{target:d.VV,func_name:"logoSource",iface:r,params:[e]},{target:e,func_name:"name",iface:n,params:[]},{target:e,func_name:"symbol",iface:n,params:[]}]},getPathname=e=>e.includes("?")?e.split("?")[0]:e,getStakingPools=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(await Promise.all(e.map(async e=>{let{address:t,type:a,...n}=e;return(await (0,l.ti)(t,s.XH[a]).getPools()).map((e,r)=>({...e,address:t,contract_idx:r,type:a,...n}))}))).reduce((e,t)=>[...e,...t],[]),n=await Promise.all(a.map((e,t)=>mapPool(e,t)));return n.filter(e=>e.type===i.W.NFT?t||!(!e.max_per_user||!e.logo||!e.header_logo):t||!(!e.input_token.logo||!e.reward_token.logo))},getters_getReservesParams=async(e,t,a)=>{let r=(0,l.dm)(u.R.Pair),o=(0,l.dm)(u.R.ERC20),[[i],s,[d]]=await (0,m.n)([{target:e,func_name:"token0",iface:r},{target:e,func_name:"getReserves",iface:r},{target:e,func_name:"totalSupply",iface:r}]),[[f],[p]]=await (0,m.n)([{target:i,func_name:"symbol",iface:o},{target:t,func_name:"symbol",iface:o}]),v=f===p?s.reserve0:s.reserve1,_=v.mul(g.O$.from(10).pow(18)).div(d.eq(0)?1:d).mul(2),y=parseFloat((0,n.bM)(_,a));return y},getAddParams=async(e,t,a)=>{let{lock_period:r,hardcap:s,end_date:l,input_token:u,is_withdraw_locked:d,reward:m,reward_token:f}=e,g=o()(l).add(Number(r),"days").unix(),p=Number(m);switch(e.type){case i.W.Compound:return[Math.floor(10*Number(m)).toString(),r,g,(0,n.vz)(s,t),u];case i.W.Dynamic:return[!1,(0,n.vz)(m,a).div(86400),r,g,(0,n.vz)(s,t),u,f];case i.W.NFT:return[d,(0,n.vz)(m,t),r,g,s,u,f];case i.W.Liquidity:return getLiquidityAddParams(u,f,a,d,p,r,g)}},getLiquidityAddParams=async(e,t,a,n,r,o,i)=>{let s;try{s=await getters_getReservesParams(e,t,a)}catch(e){throw Error("Failed to get reserves, please check if pair is vald")}return[n,Math.round(r*s*10),o,i,0,e,t]},getSetParams=async(e,t,a,r)=>{let{lock_period:l,hardcap:u,end_date:m,input_token:f,is_withdraw_locked:g,reward:p,reward_token:v}=t,_=o()(m).add(Number(l),"days").unix(),y=Number(p);switch(t.type){case i.W.Compound:return[e,Math.floor(10*Number(p)).toString(),l,_,(0,n.vz)(t.hardcap,a),s.n1,f].filter((e,t)=>d.CB&&5!==t||!d.CB);case i.W.Dynamic:return[e,!1,(0,n.vz)(p,r).div(86400),l,_,(0,n.vz)(u,a),f,v];case i.W.NFT:return[e,g,(0,n.vz)(p,a),l,_,u,f,v];case i.W.Liquidity:return getLiquiditySetParams(e,f,v,r,g,y,l,_)}},getLiquiditySetParams=async(e,t,a,n,r,o,i,s)=>{let l;try{l=await getters_getReservesParams(t,a,n)}catch(e){throw Error("Failed to get reserves, please check if pair is vald")}return[e,r,Math.round(o*l*10),i,s,0,t,a]}}}]);